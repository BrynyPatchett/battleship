(()=>{"use strict";class t{hits=0;constructor(t){this.length=t}hit(){this.hits++}isSunk(){return!(this.hits<this.length)}}class i{ships=[];constructor(t){this.grid=new Array(t),this.gridSize=t;for(let i=0;i<t;i++)this.grid[i]=Array(t).fill(0)}AddShipToGrid(i,e,r){if(1===r){if(!1===this.validVerticalInput(e,i))return!1;this.placeShipVertical(e,i,this.ships.length+1)}else{if(!1===this.validHorizontalInput(e,i))return!1;this.placeShipHorizontal(e,i,this.ships.length+1)}return this.ships.push(new t(i)),this.ships[this.ships.length-1],!0}placeShipHorizontal(t,i,e){for(let r=0;r<i;r++)this.grid[t.y][t.x+r]=e}placeShipVertical(t,i,e){for(let r=0;r<i;r++)this.grid[t.y+r][t.x]=e}AllSunk(){for(let t=0;t<this.ships.length;t++)if(!1===this.ships[t].isSunk())return!1;return!0}validHorizontalInput(t,i){for(let e=0;e<i;e++)if(!1===this.validInput(t.y,t.x+e))return!1;return!0}validVerticalInput(t,i){for(let e=0;e<i;e++)if(!1===this.validInput(t.y+e,t.x))return!1;return!0}validInput(t,i){return!(i>=this.gridSize||i<0||t>=this.gridSize||t<0||0!==this.grid[t][i])}validShotInput(t,i){return!(i>=this.gridSize||i<0||t>=this.gridSize||t<0||-1===this.grid[t][i])}ReceiveAttack(t){if(!this.validShotInput(t.y,t.x))throw new Error("Invalid Input");return 0===this.grid[t.y][t.x]?(this.grid[t.y][t.x]=-1,0):(this.ships[this.grid[t.y][t.x]-1].hit(),this.grid[t.y][t.x]=-1,1)}}class e{constructor(t,i){this.playerName=t,this.gameBoard=i}MakeMove(t){try{return this.gameBoard.ReceiveAttack(t)}catch{return-1}}}class r extends e{constructor(t,i){super(t,i),this.moves=[]}MakeRandomMove(){let t=this.getRandomInt(this.gameBoard.grid.length),i=this.getRandomInt(this.gameBoard.grid.length),e=this.getValidShot(t,i);return{status:this.MakeMove(e),coords:e}}getRandomInt(t){return Math.floor(Math.random()*t)}getValidShot(t,i){let e=i,r=t;if(-1!==this.gameBoard.grid[e][r])return{x:r,y:e};for(let t=i;t<this.gameBoard.grid.length+1;t++){t===this.gameBoard.grid.length&&(t=0);for(let i=0;i<this.gameBoard.grid.length;i++)if(-1!==this.gameBoard.grid[t][i])return{x:i,y:t}}}}function s(){let t=document.createElement("div");t.classList.add("board");let i=document.createElement("div");i.classList.add("tiles");for(let t=0;t<10;t++)for(let e=0;e<10;e++){let r=document.createElement("div");r.classList.add("tile"),r.dataset.row=t,r.dataset.col=e,i.appendChild(r)}return t.appendChild(i),t}let d=new i(10),a=new i(10),o=2,l={x:0,y:0};d.AddShipToGrid(o,l,0),a.AddShipToGrid(o,l,0),o=3,l={x:6,y:4},d.AddShipToGrid(o,l,1),a.AddShipToGrid(o,l,1),o=3,l={x:6,y:7},d.AddShipToGrid(o,l,1),a.AddShipToGrid(o,l,1),o=4,l={x:0,y:3},d.AddShipToGrid(o,l,1),a.AddShipToGrid(o,l,1),o=5,l={x:0,y:9},d.AddShipToGrid(o,l,0),a.AddShipToGrid(o,l,0);const h=document.querySelector(".game");let n=new s,c=new s;h.insertBefore(n,h.firstChild),h.appendChild(c);let u=n.querySelector(".tiles"),g=c.querySelector(".tiles");[...u.children].forEach((t=>{t.addEventListener("click",(()=>{console.log(`x: ${t.dataset.col} y: ${t.dataset.row}`)}))})),[...g.children].forEach((t=>{t.addEventListener("click",(()=>{console.log(`x: ${t.dataset.col} y: ${t.dataset.row}`)}))}));let p=new r("Computer",a),m=new r("Computer2",d);for(;!0!==p.gameBoard.AllSunk()&&!0!==m.gameBoard.AllSunk();){let t=m.MakeRandomMove(),i=u.querySelector(`[data-row="${t.coords.y}"][data-col="${t.coords.x}"]`);if(1===t.status?i.classList.add("hit"):i.classList.add("miss"),m.gameBoard.AllSunk()){console.log("Computer2 Wins");break}if(t=p.MakeRandomMove(),i=g.querySelector(`[data-row="${t.coords.y}"][data-col="${t.coords.x}"]`),1===t.status?i.classList.add("hit"):i.classList.add("miss"),p.gameBoard.AllSunk()){console.log("Computer Wins");break}}})();